(window["webpackJsonpppsspp-debugger"]=window["webpackJsonpppsspp-debugger"]||[]).push([[0],{182:function(e,t,n){},442:function(e,t,n){},452:function(e,t,n){e.exports=n.p+"static/media/logo.1d4a183a.svg"},456:function(e,t,n){e.exports=n(570)},480:function(e,t,n){},481:function(e,t,n){},482:function(e,t,n){},483:function(e,t,n){},484:function(e,t,n){},485:function(e,t,n){},486:function(e,t,n){},487:function(e,t,n){},549:function(e,t,n){},550:function(e,t,n){},551:function(e,t,n){},552:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){},555:function(e,t,n){},556:function(e,t,n){},557:function(e,t,n){},558:function(e,t,n){},570:function(e,t,n){"use strict";n.r(t);n(138),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(212),n(214),n(215),n(216),n(217),n(218),n(219),n(221),n(222),n(161),n(226),n(227),n(101),n(231),n(232),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(167),n(257),n(259),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(170),n(276),n(277),n(278),n(279),n(280),n(282),n(283),n(284),n(285),n(286),n(288),n(290),n(292),n(293),n(295),n(296),n(297),n(298),n(299),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(171),n(318),n(319),n(320),n(321),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(125),n(349),n(350),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(413),n(414),n(416),n(417),n(418),n(419),n(421),n(180);var r=n(0),a=n.n(r),s=n(60),i=n.n(s),o=n(133),c=n.n(o),l=(n(480),n(24)),u=n(5),p=n(6),d=n(9),h=n(7),f=n(10),m=n(136),g=n(72),v=n(455),b=(n(182),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).handleRequestClose=function(){n.props.confirmClose&&!window.confirm(n.props.confirmClose)||n.props.onClose()},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(c.a,Object.assign({className:"ReactModal__FitContent",overlayClassName:"ReactModal__FitOverlay",onRequestClose:this.handleRequestClose,closeTimeoutMS:150},this.props))}}]),t}(r.PureComponent)),y=n(446),k=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).handleChange=function(e){if(n.props.onChange)n.props.onChange(e);else if(n.props.component){var t=e.target,r=t.dataset.prop||n.props.prop,a="checkbox"===t.type?t.checked:t.value;n.props.component.setState(Object(l.a)({},r,a))}},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.children;return a.a.createElement("div",{className:"Field"},a.a.createElement("label",{className:"Field__label",htmlFor:this.fieldID()},t),this.renderInput(),n)}},{key:"renderInput",value:function(){return"text"===this.props.type?this.renderText():"hex"===this.props.type?this.renderHex():"radio"===this.props.type?this.renderRadio():"checkboxes"===this.props.type?this.renderCheckboxes():null}},{key:"renderText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=(t.label,t.type,t.children,t.onChange,t.component,t.prop,Object(y.a)(t,["label","type","children","onChange","component","prop"]));return n.value=this.fieldValue(),a.a.createElement("input",Object.assign({type:"text",id:this.fieldID(),onChange:this.handleChange},n,e))}},{key:"renderHex",value:function(){return this.renderText({pattern:"(0x)?[0-9A-Fa-f]+",title:"Hexadecimal value"})}},{key:"renderRadio",value:function(){var e=this,t=this.fieldValue();return this.props.options.map((function(n){var r={name:e.fieldID(),value:n.value,checked:t===n.value,onChange:e.handleChange,disabled:e.props.disabled};return a.a.createElement("label",{key:n.value},a.a.createElement("input",Object.assign({type:"radio"},r))," "+n.label)}))}},{key:"renderCheckboxes",value:function(){var e=this;return this.props.options.map((function(t){var n={"data-prop":t.value,checked:e.props.component.state[t.value],onChange:e.handleChange,disabled:e.props.disabled};return a.a.createElement("label",{key:t.value},a.a.createElement("input",Object.assign({type:"checkbox"},n))," "+t.label)}))}},{key:"fieldID",value:function(){var e=this.props,t=e.id,n=e.component,r=e.prop;return!t&&n&&r?(n.displayName||n.constructor.name)+"__"+r:t}},{key:"fieldValue",value:function(){var e=this.props,t=e.value,n=e.component,r=e.prop;return void 0===t&&n&&r?n.state[r]:t}}]),t}(r.Component),O=n(2),S=n.n(O),C=n(13),E=n.n(C);n(481);function w(e){return a.a.createElement("form",{action:"#",className:E()(e.className,"Form"),onSubmit:e.onSubmit},e.heading?a.a.createElement("h2",{className:"Form__heading"},e.heading):null,e.children)}w.Buttons=function(e){var t=!0!==e.onSave?e.onSave:void 0,n=e.onSave?a.a.createElement("button",{onClick:t},"Save"):null,r=e.onCancel?a.a.createElement("button",{type:"button",onClick:e.onCancel},"Cancel"):null;return a.a.createElement("div",{className:"Form__buttons"},e.children,n,r)},w.Buttons.propTypes={onSave:S.a.oneOfType([S.a.func,S.a.bool]),onCancel:S.a.func,children:S.a.node};var j=w,P=function(){function e(t,n){Object(u.a)(this,e),this.func=t,this.ms=n}return Object(p.a)(e,[{key:"start",value:function(){var e=this;this.cancel(),this.handle=setTimeout((function(){e.handle=null,e.func()}),this.ms)}},{key:"reset",value:function(e){this.func=e}},{key:"runEarly",value:function(){this.handle&&(this.cancel(),this.func())}},{key:"cancel",value:function(){null!==this.handle&&(clearTimeout(this.handle),this.handle=null)}}]),e}();function D(e){return("00000000"+e.toString(16).toUpperCase()).substr(-8)}n(482);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=[{label:"Memory",value:"memory"},{label:"Execute",value:"execute"}],L=[{label:"Read",value:"read"},{label:"Write",value:"write"},{label:"On change",value:"change"}],N=[{label:"Break",value:"enabled"},{label:"Log",value:"log"}],B=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={},n.cleanState={isOpen:!1,derivedBreakpoint:null},n.cleanBreakpoint={type:"memory",address:"",size:"0x00000001",condition:"",logFormat:"",read:!0,write:!0,change:!1,enabled:!0,log:!0},n.onSave=function(){var e=n.props.ppsspp.send({event:"cpu.evaluate",thread:n.props.currentThread,expression:n.state.address});if(null!==n.props.breakpoint){var t=n.state,r=t.derivedBreakpoint,a=t.address,s=t.size,i=t.type;e=i!==r.type||r.address!==a?e.then(n.deleteOld).then(n.saveNew):"memory"===i&&r.size!==s?e.then(n.deleteOld).then(n.saveNew):e.then(n.updateExisting)}else e=e.then(n.saveNew);e.then(n.onClose,(function(e){window.alert(e.message)}))},n.saveNew=function(e){var t=e.uintValue;return n.props.ppsspp.send(T({event:n.getEvent(n.state.type,"add")},n.state,{address:t}))},n.deleteOld=function(e){var t=e.uintValue;return n.props.ppsspp.send({event:n.getEvent(n.props.breakpoint.type,"remove"),address:n.props.breakpoint.address}).then((function(){return{uintValue:t}}))},n.updateExisting=function(e){var t=e.uintValue;return n.props.ppsspp.send(T({event:n.getEvent(n.state.type,"update")},n.state,{address:t}))},n.onClose=function(){n.cleanTimeout.start(),n.props.onClose()},Object.assign(n.state,T({},n.cleanState,{},n.cleanBreakpoint,{},e.breakpoint)),n.cleanTimeout=new P((function(){n.setState(T({},n.cleanState,{},n.cleanBreakpoint,{},n.props.breakpoint))}),200),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=null!==this.props.breakpoint;return a.a.createElement(b,{contentLabel:"Breakpoint settings",isOpen:this.props.isOpen,onClose:this.onClose,confirmClose:this.hasChanges()?"Discard changes?":null},a.a.createElement(j,{heading:e?"Edit Breakpoint":"Create Breakpoint",onSubmit:this.onSave,className:"BreakpointModal"},a.a.createElement(k,{type:"radio",label:"Type",options:x,prop:"type",component:this}),a.a.createElement(k,{type:"text",label:"Address",prop:"address",component:this}),this.renderMemory(),this.renderExecute(),a.a.createElement(k,{type:"text",label:"Log format",prop:"logFormat",component:this,disabled:!this.state.log}),a.a.createElement(k,{type:"checkboxes",label:"Actions",options:N,component:this}),a.a.createElement(j.Buttons,{onSave:!0,onCancel:this.onClose})))}},{key:"renderMemory",value:function(){return"memory"!==this.state.type?null:a.a.createElement(a.a.Fragment,null,a.a.createElement(k,{type:"hex",label:"Size",prop:"size",component:this}),a.a.createElement(k,{type:"checkboxes",label:"Operations",options:L,component:this}))}},{key:"renderExecute",value:function(){return"execute"!==this.state.type?null:a.a.createElement(a.a.Fragment,null,a.a.createElement(k,{type:"text",label:"Condition",prop:"condition",component:this}))}},{key:"hasChanges",value:function(){var e=this,t=this.state.derivedBreakpoint||this.cleanBreakpoint;return void 0!==Object.keys(t).find((function(n){return e.state[n]!==t[n]}))}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&null!=this.cleanTimeout&&this.cleanTimeout.runEarly()}},{key:"getEvent",value:function(e,t){if("execute"===e)return"cpu.breakpoint."+t;if("memory"===e)return"memory.breakpoint."+t;throw new Error("Unexpected type: "+e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.isOpen&&!t.isOpen){var n=e.breakpoint;return n&&(n.address="0x"+D(n.address),n.condition=n.condition||"",n.logFormat=n.logFormat||""),T({isOpen:!0},n,{derivedBreakpoint:n})}return!e.isOpen&&t.derivedBreakpoint?{derivedBreakpoint:null}:null}}]),t}(r.PureComponent),R=n(18),M=!0,V=[];function A(){var e=document.getElementById("clipboard-scratchpad");return e||function(){var e=document.createElement("div");return e.id="clipboard-scratchpad",e.style.width=1,e.style.height=1,e.style.opacity=0,e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.pointerEvents="none",e.style.whiteSpace="pre",document.body.appendChild(e),e}()}function F(e){M=!1;try{var t=A();t.textContent=e;var n=t.firstChild,r=document.createRange();r.setStart(n,0),r.setEnd(n,e.length);var a=window.getSelection(),s=0!==a.rangeCount?a.getRangeAt(0):null;a.removeAllRanges(),a.addRange(r);try{document.execCommand("copy")}catch(i){window.prompt("Use Ctrl-C or Command-C to copy",e)}a.removeAllRanges(),s&&a.addRange(s)}finally{M=!0}}function I(e,t){for(;e&&e!==document;){if(e.matches(t))return!0;e=e.parentNode}return!1}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),document.addEventListener("copy",(function(e){var t=0!==document.getSelection().rangeCount?document.getSelection().getRangeAt(0):null;if((!t||t.collapsed)&&M){var n=!0,r=!1,a=void 0;try{for(var s,i=V[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var o=s.value;if(I(document.activeElement,o.selector)){var c=o.handler(e);c&&(/win/i.test(window.navigator.platform)?e.clipboardData.setData("text/plain",c.replace(/\n/g,"\r\n")):e.clipboardData.setData("text/plain",c),e.preventDefault())}}}catch(l){r=!0,a=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}}));var U=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).handleCopyAddress=function(e,t){F(D(t.line.address)),t.node.focus()},n.handleCopyHex=function(e,t){F(n.props.getSelectedLines().map((function(e){return e.macroEncoding?e.macroEncoding.map(D).join("\n"):D(e.encoding)})).join("\n")),t.node.focus()},n.handleCopyDisasm=function(e,t){F(n.props.getSelectedDisasm()),t.node.focus()},n.handleAssemble=function(e,t){setTimeout((function(){n.props.assembleInstruction(t.line,"").catch((function(){}))}),0)},n.handleRunUntil=function(e,t){n.props.ppsspp.send({event:"cpu.runUntil",address:t.line.address}).catch((function(){})),t.node.focus()},n.handleJumpPC=function(e,t){n.props.ppsspp.send({event:"cpu.setReg",thread:n.props.currentThread,name:"pc",value:t.line.address}).catch((function(e){n.props.log("Failed to update PC: "+e)}))},n.handleToggleBreakpoint=function(e,t){n.props.toggleBreakpoint(t.line)},n.handleFollowBranch=function(e,t){n.props.followBranch(!0,t.line)},n.handleTodo=function(e,t){console.log(t),t.node.focus()},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.trigger,r=!this.props.stepping,s=n&&n.line,i=s&&(null!==s.branch||null!==s.relevantData||"data"===s.type);return a.a.createElement(R.a,{id:t},a.a.createElement(R.c,{onClick:this.handleCopyAddress},"Copy Address"),a.a.createElement(R.c,{onClick:this.handleCopyHex},"Copy Instruction (Hex)"),a.a.createElement(R.c,{onClick:this.handleCopyDisasm},"Copy Instruction (Disasm)"),a.a.createElement(R.c,{divider:!0}),a.a.createElement(R.c,{disabled:r,onClick:this.handleAssemble},"Assemble Opcode..."),a.a.createElement(R.c,{divider:!0}),a.a.createElement(R.c,{disabled:r,onClick:this.handleRunUntil},"Run to Cursor"),a.a.createElement(R.c,{disabled:r,onClick:this.handleJumpPC},"Jump to Cursor"),a.a.createElement(R.c,{onClick:this.handleToggleBreakpoint},"Toggle Breakpoint"),a.a.createElement(R.c,{divider:!0}),a.a.createElement(R.c,{disabled:!i,onClick:this.handleFollowBranch},"Follow Branch"),a.a.createElement(R.c,{data:{action:"goto_memory"},onClick:this.handleTodo},"Go to in Memory View"),a.a.createElement(R.c,{data:{action:"goto_jit"},onClick:this.handleTodo},"Go to in Jit Compare"),a.a.createElement(R.c,{divider:!0}),a.a.createElement(R.c,{data:{action:"func_rename"},onClick:this.handleTodo},"Rename Function..."),a.a.createElement(R.c,{data:{action:"func_remove"},onClick:this.handleTodo},"Remove Function"),a.a.createElement(R.c,{data:{action:"func_add"},onClick:this.handleTodo},"Add Function Here"))}}]),t}(r.PureComponent),H=Object(R.d)("disasm")(U),G=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.calcPos();if(null===e||0===this.props.lineHeight)return null;var t=E()({DisasmBranchGuide:!0,"DisasmBranchGuide--selected":this.props.selected});return a.a.createElement("div",{className:t,style:e},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:e.height},a.a.createElement("path",{d:this.buildPath(e.height)})))}},{key:"buildPath",value:function(e){var t=this.props,n=t.guide,r=t.range,a=t.lineHeight,s=Math.floor(a/2)+.5,i="m7.5,-".concat(s," l0,").concat(a," m-7.5,-").concat(a-s),o="m5.5,-4 l-4,4 l4,4 m-3.5,-4 l6,0 m-8,0",c=["M0,"+s];return n.top<r.start?c.push(i):"up"===n.direction?c.push(o):c.push("m3,0 l5,0 m-8,0"),c.push("m7.5,0 l0,"+(e-a)+" m-7.5,0"),n.bottom>=r.end?c.push(i):"down"===n.direction?c.push(o):c.push("m3,0 l5,0 m-8,0"),c}},{key:"calcPos",value:function(){var e=this.props.guide,t=this.findAddressOffset(e.top,!1),n=this.findAddressOffset(e.bottom,!0);return null===t||null===n?null:{top:t,right:8*(16-e.lane),height:n-t}}},{key:"findAddressOffset",value:function(e,t){var n,r=this.props,a=r.offsets,s=r.range;if(e>=s.end)return s.end-4 in a&&t?a[s.end-4]+this.props.lineHeight:s.end-8 in a&&t?a[s.end-8]+this.props.lineHeight:null;if(e<s.start&&!t)n=0;else if(e in a)n=a[e];else{if(!(e-4 in a))return null;n=a[e-4]}return t?n+this.props.lineHeight:n}}]),t}(r.PureComponent);function q(e,t){return!(e.top<t.top||e.left<t.left)&&!(e.bottom>t.bottom||e.right>t.right)}function z(e,t){return!function(e){var t={top:0,left:0,bottom:window.innerHeight,right:window.innerWidth},n=e.getBoundingClientRect();if(!q(n,t))return!1;for(var r=e;null!==(r=r.parentNode);)if(r instanceof HTMLElement){var a=window.getComputedStyle(r),s=a.overflow+a.overflowX+a.overflowY;if("static"===a.position&&-1===s.indexOf("auto")&&-1===s.indexOf("scroll"))continue;if(!q(n,r.getBoundingClientRect()))return!1}return!0}(e)&&(e.scrollIntoView(t),!0)}var W=!1;function K(){return W}function J(e){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:e.className,viewBox:"0 0 1536 1536",width:"12",height:"12"},a.a.createElement("path",{d:"M768,0 q209,0 385.5,103 t279.5,279.5 t103,385.5 t-103,385.5 t-279.5,279.5 t-385.5,103 t-385.5,-103 t-279.5,-279.5 t-103,-385.5 t103,-385.5 t279.5,-279.5 t385.5,-103 zm128,1247 v-190 q0,-14 -9,-23.5 t-22,-9.5 h-192 q-13,0 -23,10 t-10,23 v190 q0,13 10,23 t23,10 h192 q13,0 22,-9.5 t9,-23.5 zm-2,-344 l18,-621 q0,-12 -10,-18 q-10,-8 -24,-8 h-220 q-14,0 -24,8 q-10,6 -10,18 l17,621 q0,10 10,17.5 t24,7.5 h185 q14,0 23.5,-7.5 t10.5,-17.5 z"}))}window.addEventListener("REACT_CONTEXTMENU_SHOW",(function(e){W=!0})),window.addEventListener("REACT_CONTEXTMENU_HIDE",(function(e){W=!1}));var X=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).ref=a.a.createRef(),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.line,r=t.selected,s=t.focused,i=t.cursor,o=E()({DisasmLine:!0,"DisasmLine--selected":r&&!s,"DisasmLine--focused":s,"DisasmLine--cursor":i,"DisasmLine--breakpoint":n.breakpoint&&n.breakpoint.enabled,"DisasmLine--disabled-breakpoint":n.breakpoint&&!n.breakpoint.enabled,"DisasmLine--current":n.isCurrentPC}),c=function(t){return{line:n,node:e.ref.current.parentNode}},l={onDoubleClick:function(t){return e.onDoubleClick(t,c())},tabIndex:0};return a.a.createElement(R.b,{id:this.props.contextmenu,renderTag:"a",collect:c,attributes:l},a.a.createElement("div",{className:o,style:{backgroundColor:n.backgroundColor},ref:this.ref,"data-address":n.address},a.a.createElement(J,{className:"DisasmLine__breakpoint-icon"}),this.renderAddress(n),a.a.createElement("code",{className:"DisasmLine__opcode"},this.highlight(n.name,"",n.params)," "),a.a.createElement("code",{className:"DisasmLine__params"},this.highlightParams(n.params,n.name,""),this.renderConditional(n))))}},{key:"renderAddress",value:function(e){var t=e.symbol,n=e.address,r=e.encoding,s=D(n);return this.props.displaySymbols?null!==t?a.a.createElement("code",{className:"DisasmLine__address DisasmLine__address--symbol"},this.highlight(t+":")):a.a.createElement("code",{className:"DisasmLine__address DisasmLine__address--nosymbol"},this.highlight(s)):a.a.createElement("code",{className:"DisasmLine__address DisasmLine__address--hexonly"},this.highlight(s)," ",D(r))}},{key:"renderConditional",value:function(e){return e.isCurrentPC&&null!==e.conditionMet?e.conditionMet?" ; true":" ; false":""}},{key:"highlight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.props.highlight;if(null!==r){var s=(t?t+" ":"")+e+" "+n,i=s.toLowerCase().indexOf(r),o=r.length;if(-1!==i){var c=t?t.length+1:0;i<c?i=(o-=c-i)>0?0:-1:i-=c}if(i>=0&&i<e.length){var l=E()({DisasmLine__highlight:!0,"DisasmLine__highlight--end":i+o>e.length+1});return a.a.createElement(a.a.Fragment,null,e.substr(0,i),a.a.createElement("span",{className:l},e.substr(i,o)),e.substr(i+o))}}return e}},{key:"highlightParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.props,s=r.highlight,i=r.highlightParams;if(null===s){var o=e.split(/([,()])/),c=i||[];return o.map((function(e,t){var n="DisasmLine__param";return c.includes(e)&&(n+=" DisasmLine__param--highlighted"),a.a.createElement("span",{className:n,key:t},e)}))}return this.highlight(e,t,n)}},{key:"onDoubleClick",value:function(e,t){0===e.button&&this.props.onDoubleClick(e,t)}},{key:"ensureInView",value:function(e){var t=this.ref.current.parentNode;!1!==e&&z(t,{block:e}),t.focus()}}],[{key:"addressBoundingTop",value:function(e,t){var n=e.querySelector('.DisasmLine[data-address="'+t+'"]');return n?n.parentNode.getBoundingClientRect().top:null}}]),t}(r.PureComponent);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={mouseDown:!1,focused:!1,lineOffsets:{},pendingLineParams:[],selectedLineParams:[],prevLines:null,prevSelectionTop:null,prevSelectionBottom:null},n.onCopy=function(e){return n.props.getSelectedDisasm()},n.ref=a.a.createRef(),n.cursorRef=a.a.createRef(),n.focusTimeout=new P((function(){return null}),20),n.paramsTimeout=new P((function(){n.setState({selectedLineParams:n.state.pendingLineParams})}),20),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t={onMouseDownCapture:function(t){return e.onMouseDown(t)},onMouseUpCapture:this.state.mouseDown?function(t){return e.onMouseUp(t)}:void 0,onMouseMove:this.state.mouseDown?function(t){return e.onMouseMove(t)}:void 0,onKeyDown:function(t){return e.onKeyDown(t)},onBlur:function(t){return e.onFocusChange(t,!1)},onFocus:function(t){return e.onFocusChange(t,!0)}};return a.a.createElement("div",Object.assign({className:"Disasm__list",ref:this.ref},t),this.props.lines.map((function(t){return e.renderLine(t)})),this.props.branchGuides.map((function(t){return e.renderBranchGuide(t)})))}},{key:"renderLine",value:function(e){var t=this.props,n=t.displaySymbols,r=t.cursor,s={displaySymbols:n,line:e,selected:this.isLineSelected(e),cursor:e.address===r,onDoubleClick:this.props.onDoubleClick,ref:e.address===r?this.cursorRef:void 0,highlight:this.shouldHighlight(e,this.props.highlightText)?this.props.highlightText:null,highlightParams:this.shouldHighlightParams(e)?this.state.selectedLineParams:null};return s.focused=s.selected&&this.state.focused,a.a.createElement(X,Object.assign({key:e.address,contextmenu:"disasm"},s))}},{key:"renderBranchGuide",value:function(e){var t=String(e.top)+String(e.bottom)+e.direction,n=this.props,r=n.range,s=n.lineHeight,i=n.cursor,o={key:t,guide:e,offsets:this.state.lineOffsets,range:r,lineHeight:s,selected:e.top===i||e.bottom===i};return a.a.createElement(G,o)}},{key:"shouldHighlight",value:function(e,t){var n=[];return n.push(D(e.address)),null!==e.symbol&&n.push(e.symbol+":"),n.push(e.name+" "+e.params),n.some((function(e){return-1!==e.toLowerCase().indexOf(t)}))}},{key:"shouldHighlightParams",value:function(e,t){return!this.isLineSelected(e)&&this.state.selectedLineParams.some((function(t){return-1!==e.params.indexOf(t)}))}},{key:"addressBoundingTop",value:function(e){return X.addressBoundingTop(this.ref.current,e)}},{key:"ensureCursorInView",value:function(e){this.cursorRef.current&&this.cursorRef.current.ensureInView(e)}},{key:"isLineSelected",value:function(e){return t.isLineSelected(this.props,e)}},{key:"componentDidMount",value:function(){var e,t;e=".Disasm__list",t=this.onCopy,V.push({selector:e,handler:t})}},{key:"componentWillUnmount",value:function(){var e,t;e=".Disasm__list",t=this.onCopy,V=V.filter((function(n){return n.selector!==e&&n.handler!==t})),this.paramsTimeout.cancel()}},{key:"componentDidUpdate",value:function(e,t){this.state.pendingLineParams!==t.pendingLineParams&&this.paramsTimeout.start()}},{key:"onFocusChange",value:function(e,t){var n=this,r=function(){t!==n.state.focused&&n.setState({focused:t})};this.focusTimeout.cancel(),t?r():(this.focusTimeout.reset(r),this.focusTimeout.start())}},{key:"onMouseDown",value:function(e){var t=this.mouseEventToLine(e);2===e.button&&this.isLineSelected(t)?this.props.updateCursor(t.address):this.applySelection(e,t),0===e.button&&this.setState({mouseDown:!0})}},{key:"onMouseUp",value:function(e){var t=this.mouseEventToLine(e);t&&this.applySelection(e,t),this.setState({mouseDown:!1})}},{key:"onMouseMove",value:function(e){if(0!==e.buttons){var t=this.mouseEventToLine(e);t&&this.applySelection(e,t)}else this.setState({mouseDown:!1})}},{key:"onKeyDown",value:function(e){if(!K()){var t=(e.ctrlKey?"c":"")+(e.metaKey?"m":"")+(e.altKey?"a":"")+(e.shiftKey?"s":"");if(["ArrowUp","ArrowDown","PageUp","PageDown"].includes(e.key)){var n=1;if("PageUp"!==e.key&&"PageDown"!==e.key||(n=this.props.visibleLines),"ArrowUp"!==e.key&&"PageUp"!==e.key||(n=-n),""===t||"s"===t){var r=this.findCursorLineIndex(),a=Math.min(this.props.lines.length-1,Math.max(0,r+n));r!==a&&(this.applySelection(e,this.props.lines[a]),e.preventDefault())}else e.ctrlKey&&(this.props.applyScroll(n),e.preventDefault())}"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||""!==t||(this.props.followBranch("ArrowRight"===e.key,this.findCursorLine()),e.preventDefault()),"Tab"===e.key&&""===t&&(this.props.updateDisplaySymbols(!this.props.displaySymbols),e.preventDefault()),"a"===e.key&&"c"===t&&(this.props.assembleInstruction(this.findCursorLine(),""),e.preventDefault())," "!==e.key&&"Spacebar"!==e.key||""!==t||(this.props.toggleBreakpoint(this.findCursorLine()),e.preventDefault()),"d"===e.key&&"c"===t&&(this.props.toggleBreakpoint(this.findCursorLine(),!0),e.preventDefault()),"s"!==e.key&&"f"!==e.key||"c"!==t||(this.props.searchPrompt(),e.preventDefault()),"F3"===e.key&&""===t&&(this.props.searchNext(),e.preventDefault()),"g"===e.key&&"c"===t&&(this.props.promptGoto(),e.preventDefault()),"e"===e.key&&"c"===t&&(this.props.editBreakpoint(this.findCursorLine()),e.preventDefault())}}},{key:"applySelection",value:function(e,t){var n=this.props,r=n.selectionTop,a=n.selectionBottom;e.shiftKey?(r=Math.min(r,t.address),a=Math.max(a,t.address)):(r=t.address,a=t.address),r===this.props.selectionTop&&a===this.props.selectionBottom||this.props.updateSelection({selectionTop:r,selectionBottom:a}),this.props.updateCursor(t.address)}},{key:"mouseEventToLine",value:function(e){var t=e.pageY-this.ref.current.getBoundingClientRect().top-window.pageYOffset,n=Math.floor(t/this.props.lineHeight);return this.props.lines[n]}},{key:"findCursorLineIndex",value:function(){for(var e=this.props,t=e.cursor,n=e.lines,r=e.selectionTop,a=t||r,s=0;s<n.length;++s)if(n[s].address===a)return s}},{key:"findCursorLine",value:function(){var e=this.findCursorLineIndex();return this.props.lines[e]}}],[{key:"isLineSelected",value:function(e,t){var n=e.selectionTop,r=e.selectionBottom;return t.address+t.addressSize>n&&t.address<=r}},{key:"calcOffsets",value:function(e,t){var n=0,r={};return e.forEach((function(e){r[e.address]=n,n+=t})),r}},{key:"getSelectedLineParams",value:function(e){var n=e.lines,r=e.selectionTop,a=e.selectionBottom,s=n.filter(t.isLineSelected.bind(null,{selectionTop:r,selectionBottom:a})),i={},o=!0,c=!1,l=void 0;try{for(var u,p=s[Symbol.iterator]();!(o=(u=p.next()).done);o=!0){var d=u.value,h=!0,f=!1,m=void 0;try{for(var g,v=d.params.split(/[,()]/)[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var b=g.value;i[b]=b}}catch(y){f=!0,m=y}finally{try{h||null==v.return||v.return()}finally{if(f)throw m}}}}catch(y){c=!0,l=y}finally{try{o||null==p.return||p.return()}finally{if(c)throw l}}return delete i[""],Object.values(i)}},{key:"getDerivedStateFromProps",value:function(e,n){var r=e.lines!==n.prevLines,a=e.selectionTop!==n.prevSelectionTop||e.selectionBottom!==n.prevSelectionBottom,s=null;r&&(s={lineOffsets:t.calcOffsets(e.lines,e.lineHeight),prevLines:e.lines});var i=null;return(r||a)&&(i={pendingLineParams:t.getSelectedLineParams(e),prevSelectionTop:e.selectionTop,prevSelectionBottom:e.selectionBottom}),null!==s||null!==i?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},s,{},i):null}}]),t}(r.PureComponent),Q=(n(483),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){n.props.updateSearchString(e.target.value)},n.handleNext=function(e){n.props.searchNext(),n.focus(),e.preventDefault()},n.handleCancel=function(e){n.props.updateSearchString(null)},n.handleKeyDown=function(e){"Escape"===e.key&&(n.handleCancel(),e.preventDefault())},n.ref=a.a.createRef(),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.searchString||"",t=E()("DisasmSearch__field",{"DisasmSearch__field--progress":this.props.inProgress});return a.a.createElement("form",{action:"#",className:"DisasmSearch",hidden:null===this.props.searchString,onSubmit:this.handleNext},a.a.createElement("div",{className:t},a.a.createElement("input",{type:"search",value:e,placeholder:"Find...",onChange:this.handleChange,onKeyDown:this.handleKeyDown,ref:this.ref})),a.a.createElement("button",{type:"submit"},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"15",height:"15",role:"img"},a.a.createElement("title",null,"Search / Next"),a.a.createElement("path",{d:"M10,50 l80,0 l-35,-40 m35,40 l-35,40"}))),a.a.createElement("button",{type:"button",onClick:this.handleCancel},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 180 180",width:"15",height:"15",role:"img"},a.a.createElement("title",null,"Cancel"),a.a.createElement("path",{d:"M30,30 l120,120 m-120,0 l120,-120"}))))}},{key:"componentDidUpdate",value:function(e,t){null===e.searchString&&null!==this.props.searchString&&this.focus()}},{key:"focus",value:function(){this.ref.current.focus()}}]),t}(r.PureComponent)),Z=(n(484),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.line;return e?a.a.createElement("div",{className:"StatusBar"},a.a.createElement("div",{className:"StatusBar__left"},this.renderLeftStatus(e)),a.a.createElement("div",{className:"StatusBar__right"},e.function||e.symbol||"")):a.a.createElement("div",{className:"StatusBar"})}},{key:"renderLeftStatus",value:function(e){if("opcode"===e.type||"macro"===e.type){if(e.dataAccess)return this.renderDataAccess(e.dataAccess);if(e.branch)return this.renderBranch(e.branch)}else if("data"===e.type)return this.renderDataSymbol(e.dataSymbol,e.address);return""}},{key:"renderDataAccess",value:function(e){if(null===e.uintValue)return"Invalid address "+D(e.address);var t="["+D(e.address)+"] = ";return e.valueSymbol&&(t+=e.valueSymbol+" ("),1===e.size?t+=("00"+e.uintValue.toString(16).toUpperCase()).substr(-2):2===e.size?t+=function(e){return("0000"+e.toString(16).toUpperCase()).substr(-4)}(e.uintValue):e.size>=4&&(t+=D(e.uintValue)),e.valueSymbol&&(t+=")"),t}},{key:"renderBranch",value:function(e){var t=e.targetAddress?D(e.targetAddress):"";return e.symbol&&(t+=" = "+e.symbol),t}},{key:"renderDataSymbol",value:function(e,t){var n=D(e.start);return e.label&&(n+=" ("+e.label+")"),t!==e.start&&(n+=" + "+D(e.start-t)),n}}]),t}(r.PureComponent)),ee=new(function(){function e(){Object(u.a)(this,e),this.changeCallbacks_=[],this.ppsspp_=null,this.connected_=!1}return Object(p.a)(e,[{key:"init",value:function(e){this.ppsspp_=e}},{key:"change",value:function(e){this.connected_=e;var t=!0,n=!1,r=void 0;try{for(var a,s=this.changeCallbacks_[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){(0,a.value)(e)}}catch(i){n=!0,r=i}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}},{key:"onConnectionChange",value:function(e){var t=this;return this.changeCallbacks_.push(e),{remove:function(){var n=t.changeCallbacks_.indexOf(e);-1!==n&&t.changeCallbacks_.splice(n,1)}}}},{key:"onConnection",value:function(e){return this.connected_&&e(!0),this.onConnectionChange((function(t){t&&e(!0)}))}},{key:"listen",value:function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=void 0;r="connection"===n?this.onConnection(e[n]):"connection.change"===n?this.onConnectionChange(e[n]):this.ppsspp_.listen(n,e[n]),t.push(r)}return t}},{key:"forget",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){a.value.remove()}}catch(i){n=!0,r=i}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}}]),e}());n(485);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=100,ae=500,se=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={lines:[],branchGuides:[],range:{start:0,end:0},lineHeight:0,visibleLines:0,displaySymbols:!0,wantDisplaySymbols:!0,cursor:null,searchString:null,searchInProgress:!1,highlightText:null,editingBreakpoint:null},n.jumpStack=[],n.needsScroll=!1,n.needsOffsetFix=!1,n.updatesCancel=!1,n.updatesSequence=Promise.resolve(null),n.lastSearch=null,n.updateCursor=function(e){n.state.cursor!==e&&(n.needsScroll="nearest",n.setState({cursor:e}),n.updatesSequence=n.updatesSequence.then((function(){if(n.updatesCancel)return null;var t=n.state.range,r=t.start,a=t.end,s=Math.max(re,n.state.visibleLines),i=Math.max(ae,5*n.state.visibleLines);return e-4*s<r?r=e-2*s*4:e-4*i>r&&(r=e-4*(i-s)),e+4*s>a?a=e+2*s*4:e+4*i<a&&(a=e+4*(i-s)),r!==n.state.range.start||a!==n.state.range.end?n.updateDisasmNow("nearest",{address:r,end:a}):null})))},n.getSelectedLines=function(){var e=n.props,t=e.selectionTop,r=e.selectionBottom;return n.state.lines.filter((function(e){return e.address+e.addressSize>t&&e.address<=r}))},n.getSelectedDisasm=function(){var e=n.getSelectedLines(),t={},r=e.map((function(e){return e.branch})).filter((function(e){return e&&!e.symbol&&e.targetAddress})),a=!0,s=!1,i=void 0;try{for(var o,c=r[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value;t[l.targetAddress]="pos_"+D(l.targetAddress)}}catch(y){s=!0,i=y}finally{try{a||null==c.return||c.return()}finally{if(s)throw i}}var u="",p=!0,d=!0,h=!1,f=void 0;try{for(var m,g=e[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var v=m.value,b=v.symbol||t[v.address];b&&(p||(u+="\n"),u+=b+":\n\n"),u+="\t"+v.name+" ",v.branch&&v.branch.targetAddress&&!v.branch.symbol?u+=v.params.replace(/0x[0-9A-f]+/,t[v.branch.targetAddress]):u+=v.params,u+="\n",p=!1}}catch(y){h=!0,f=y}finally{try{d||null==g.return||g.return()}finally{if(h)throw f}}return u},n.updateDisplaySymbols=function(e){n.setState({wantDisplaySymbols:e})},n.followBranch=function(e,t){if(e){var r=t.branch&&t.branch.targetAddress;null===r&&(r=t.relevantData&&t.relevantData.address),null!==r&&(n.jumpStack.push(n.state.cursor),n.gotoAddress(r))}else 0!==n.jumpStack.length?n.gotoAddress(n.jumpStack.pop()):n.gotoAddress(n.props.pc)},n.assembleInstruction=function(e,t){var r=e.address,a=prompt("Assemble instruction",t);if(!a)return Promise.resolve(null);var s=function(){return n.props.ppsspp.send({event:"memory.assemble",address:r,code:a}).then((function(){if(r===n.state.cursor){var t=n.state.lines.indexOf(e);if(t<n.state.lines.length-1){var a=n.state.lines[t+1].address;n.gotoAddress(a,"nearest")}}n.updateDisasm()}))},i=a.split(/\s*=\s*(.+)$/,2);return i.length>=2?n.props.ppsspp.send({event:"cpu.evaluate",thread:n.props.currentThread,expression:i[1]}).then((function(e){return n.props.ppsspp.send({event:"cpu.setReg",thread:n.props.currentThread,name:i[0],value:e.uintValue})})).then((function(e){var t=e.uintValue;n.props.log("Updated "+i[0]+" to "+D(t))}),s):s()},n.toggleBreakpoint=function(e,t){if(null===e.breakpoint)n.props.ppsspp.send({event:"cpu.breakpoint.add",address:e.address,enabled:!0});else if(e.breakpoint.enabled)if(t)n.props.ppsspp.send({event:"cpu.breakpoint.update",address:e.address,enabled:!1});else{if(null!==e.breakpoint.condition&&!window.confirm("This breakpoint has has a condition.\n\nAre you sure you want to remove it?"))return;n.props.ppsspp.send({event:"cpu.breakpoint.remove",address:e.address})}else n.props.ppsspp.send({event:"cpu.breakpoint.update",address:e.address,enabled:!0})},n.editBreakpoint=function(e){n.props.ppsspp.send({event:"cpu.breakpoint.list",address:e.address,enabled:!0}).then((function(t){var r=t.breakpoints.find((function(t){return t.address===e.address}));if(r){var a=ne({},r,{type:"execute"});n.setState({editingBreakpoint:a})}}))},n.closeEditBreakpoint=function(){n.setState({editingBreakpoint:null})},n.gotoAddress=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";n.needsScroll=t,n.props.updateSelection({selectionTop:e,selectionBottom:e})},n.searchDisasm=function(e){var t=e&&null!==n.lastSearch,r=n.state,a=r.cursor,s=r.searchString;if(t||s){if(n.state.searchInProgress){if(t)return;n.searchCancel()}t||(n.lastSearch={match:s,end:a,last:null});var i={cancel:!1};n.lastSearch.cancelState=i,n.setState({searchInProgress:!0});var o=n.lastSearch,c=o.match,l=o.end,u=o.last;n.props.ppsspp.send({event:"memory.searchDisasm",address:a===u?a+4:a,end:l,match:c}).then((function(e){var t=e.address;i.cancel||(n.lastSearch&&(n.lastSearch.last=t),null!==t?n.gotoAddress(t):a!==l?(window.alert("Reached the starting point of the search"),n.gotoAddress(l)):window.alert("The specified text was not found:\n\n"+c))})).finally((function(){i.cancel||(n.setState({searchInProgress:!1}),n.lastSearch&&(n.lastSearch.cancelState=null))}))}else n.searchPrompt()},n.updateSearchString=function(e){var t=e?e.toLowerCase():null;n.setState({highlightText:t,searchString:e}),n.lastSearch&&n.lastSearch.match!==e&&(n.searchCancel(),n.lastSearch=null),null===e&&n.listRef.current&&n.listRef.current.ensureCursorInView(!1)},n.searchPrompt=function(){n.updateSearchString(n.state.searchString||(n.lastSearch?n.lastSearch.match:"")),n.searchRef.current.focus()},n.searchNext=function(){n.searchDisasm(!0)},n.searchCancel=function(){n.lastSearch&&n.lastSearch.cancelState&&(n.lastSearch.cancelState.cancel=!0,n.setState({searchInProgress:!1}),n.lastSearch.cancelState=null)},n.onDoubleClick=function(e,t){n.toggleBreakpoint(t.line)},n.applyScroll=function(e){n.ref.current.scrollTop+=e*n.state.lineHeight},n.ref=a.a.createRef(),n.listRef=a.a.createRef(),n.searchRef=a.a.createRef(),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t={onScroll:function(t){return e.onScroll(t)},onDragStart:function(e){return e.preventDefault()}};return this.props.started?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",Object.assign({ref:this.ref,className:"Disasm"},t),a.a.createElement($,Object.assign({ref:this.listRef},this.state,{onDoubleClick:this.onDoubleClick,updateSelection:this.props.updateSelection,promptGoto:this.props.promptGoto,updateCursor:this.updateCursor,updateDisplaySymbols:this.updateDisplaySymbols,selectionTop:this.props.selectionTop,selectionBottom:this.props.selectionBottom,getSelectedDisasm:this.getSelectedDisasm,followBranch:this.followBranch,assembleInstruction:this.assembleInstruction,toggleBreakpoint:this.toggleBreakpoint,editBreakpoint:this.editBreakpoint,applyScroll:this.applyScroll,searchPrompt:this.searchPrompt,searchNext:this.searchNext}))),a.a.createElement(Z,{line:this.state.lines.find((function(t){return t.address===e.state.cursor}))}),this.renderContextMenu(),a.a.createElement(Q,{ref:this.searchRef,searchString:this.state.searchString,searchNext:this.searchNext,updateSearchString:this.updateSearchString,inProgress:this.state.searchInProgress}),a.a.createElement(B,{ppsspp:this.props.ppsspp,currentThread:this.props.currentThread,isOpen:null!==this.state.editingBreakpoint,onClose:this.closeEditBreakpoint,breakpoint:this.state.editingBreakpoint})):this.renderNotStarted()}},{key:"renderNotStarted",value:function(){return a.a.createElement("div",{className:"Disasm--not-started"},"Waiting for a game to start...")}},{key:"renderContextMenu",value:function(){return a.a.createElement(H,{ppsspp:this.props.ppsspp,log:this.props.log,stepping:this.props.stepping,currentThread:this.props.currentThread,getSelectedLines:this.getSelectedLines,getSelectedDisasm:this.getSelectedDisasm,followBranch:this.followBranch,assembleInstruction:this.assembleInstruction,toggleBreakpoint:this.toggleBreakpoint})}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(this.needsOffsetFix&&this.listRef.current&&0!==this.state.lines.length){var n=this.state.lines,r=n[Math.floor(n.length/2)].address,a=this.listRef.current.addressBoundingTop(r);if(a)return{top:a,centerAddress:r}}return null}},{key:"componentDidMount",value:function(){var e=this;this.listeners_=ee.listen({connection:function(){e.props.started&&e.updateDisasm("center")},"cpu.stepping":function(){var t=0!==e.state.range.start||0!==e.state.range.end;e.updateDisasm(t?"nearest":"center")},"cpu.setReg":function(t){0===t.category&&32===t.register&&e.updateDisasm("center")},"cpu.breakpoint.add":function(){e.updateDisasm()},"cpu.breakpoint.update":function(){e.updateDisasm()},"cpu.breakpoint.remove":function(){e.updateDisasm()}}),this.updatesCancel=!1}},{key:"componentWillUnmount",value:function(){this.searchCancel(),this.updatesCancel=!0,ee.forget(this.listeners_)}},{key:"componentDidUpdate",value:function(e,t,n){var r=this,a=this.props,s=a.selectionTop,i=a.selectionBottom,o=this.state,c=o.range,l=o.lineHeight,u=null,p=null;if(this.state.wantDisplaySymbols!==t.wantDisplaySymbols&&(u=!1),this.props.currentThread!==e.currentThread&&(u=!1),s===e.selectionTop&&i===e.selectionBottom||(s<c.start||i>=c.end)&&(u="center",p=!0),u||e.setInitialPC||!this.props.setInitialPC||(u="center",p=!0),null!==u&&this.props.setInitialPC&&this.updateDisasm(u,p),0===l){var d=document.querySelector(".DisasmLine");d&&setTimeout((function(){return r.setState({lineHeight:d.getBoundingClientRect().height})}),0)}else if(this.ref.current){var h=Math.floor(this.ref.current.clientHeight/l);h!==this.state.visibleLines&&this.setState({visibleLines:h})}if(this.props.jumpMarker!==e.jumpMarker&&(this.needsScroll="center"),this.needsScroll&&this.listRef.current){var f=this.listRef.current;setTimeout((function(){f.ensureCursorInView(r.needsScroll),r.needsScroll=!1}),0)}if(n&&this.listRef.current){var m=this.listRef.current.addressBoundingTop(n.centerAddress);this.ref.current.scrollTop-=n.top-m,this.needsOffsetFix=!1}}},{key:"updateDisasm",value:function(e,t){var n=this;this.updatesSequence=this.updatesSequence.then((function(){return n.updatesCancel?null:n.updateDisasmNow(e,t)}))}},{key:"updateDisasmNow",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.props.setInitialPC)return Promise.resolve(null);var r=this.state,a=r.range,s=r.visibleLines,i=r.wantDisplaySymbols,o=n;if(!0===n||null===n&&0===a.start&&0===a.end){var c=Math.max(re,s),l=Math.floor(1.5*c);o={address:this.props.selectionTop-4*l,count:2*l}}else null===n&&(o={address:a.start,end:a.end});return Promise.resolve(null).then((function(){return t.props.ppsspp.send(ne({event:"memory.disasm",thread:t.props.currentThread},o,{displaySymbols:i})).then((function(n){if(!t.updatesCancel){var r=n.range,a=n.branchGuides,s=n.lines;e?t.needsScroll=e:t.needsOffsetFix=!0,t.setState({range:r,branchGuides:t.cleanupBranchGuides(a),lines:s,displaySymbols:i})}}),(function(e){t.updatesCancel||t.setState({range:{start:0,end:0},branchGuides:[],lines:[]})}))}))}},{key:"cleanupBranchGuides",value:function(e){var t=new Map;return e.forEach((function(e){var n=String(e.top)+String(e.bottom)+e.direction;t.set(n,e)})),Object(v.a)(t.values())}},{key:"onScroll",value:function(e){var t=this;this.updatesSequence=this.updatesSequence.then((function(){if(t.updatesCancel)return null;var e=t.bufferRange(),n=e.bufferTop,r=e.bufferBottom,a=Math.max(re,t.state.visibleLines),s=Math.max(ae,5*t.state.visibleLines),i=t.state.range,o=i.start,c=i.end;return n<a?o-=4*a:n>s&&(o+=4*Math.max(a,n-s)),r<a?c+=4*a:r>s&&(c-=4*Math.max(a,r-s)),o!==t.state.range.start||c!==t.state.range.end?t.updateDisasmNow(!1,{address:o,end:c}):null}))}},{key:"bufferRange",value:function(){var e=this.ref.current,t=e.scrollHeight,n=e.scrollTop,r=e.clientHeight,a=n/this.state.lineHeight,s=(t-n-r)/this.state.lineHeight,i=Math.floor((this.state.visibleLines-1)/2);return{bufferTop:a+i,bufferBottom:s+i}}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.selectionTop,r=e.selectionBottom;if(t.cursor<n||t.cursor>r){var a=n;if(t.lines.length){var s=t.lines.find((function(e){return e.address<=n&&e.address+e.addressSize>n}));a=s?s.address:a}return{cursor:a}}return null}}]),t}(r.PureComponent);n(486);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={breakpointModalOpen:!1,connected:!1,lastThread:"",threads:[]},n.handleGoBreak=function(){n.props.stepping&&n.props.updateCurrentThread(void 0),n.props.ppsspp.send({event:n.props.stepping?"cpu.resume":"cpu.stepping"}).catch((function(){}))},n.handleStepInto=function(){n.props.updateCurrentThread(void 0),n.props.ppsspp.send({event:"cpu.stepInto",thread:n.props.currentThread}).catch((function(){}))},n.handleStepOver=function(){n.props.updateCurrentThread(void 0),n.props.ppsspp.send({event:"cpu.stepOver",thread:n.props.currentThread}).catch((function(){}))},n.handleStepOut=function(){var e=n.props.currentThread;n.props.updateCurrentThread(void 0),n.props.ppsspp.send({event:"cpu.stepOut",thread:n.props.currentThread}).catch((function(){n.props.updateCurrentThread(e)}))},n.handleNextHLE=function(){n.props.updateCurrentThread(void 0),n.props.ppsspp.send({event:"cpu.nextHLE"}).catch((function(){}))},n.handleThreadSelect=function(e){var t=n.state.threads.find((function(t){return t.id===Number(e.target.value)}));t&&n.props.updateCurrentThread(t.id,t.pc)},n.handleBreakpointOpen=function(){n.setState({breakpointModalOpen:!0})},n.handleBreakpointClose=function(){n.setState({breakpointModalOpen:!1})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=!this.props.started||!this.props.stepping;return a.a.createElement("div",{className:"DisasmButtons"},a.a.createElement("button",{type:"button",disabled:!this.props.started||this.props.paused,onClick:this.handleGoBreak},this.props.stepping||!this.props.started?"Go":"Break"),a.a.createElement("span",{className:"DisasmButtons__spacer"}),a.a.createElement("button",{type:"button",disabled:e,onClick:this.handleStepInto},"Step Into"),a.a.createElement("button",{type:"button",disabled:e,onClick:this.handleStepOver},"Step Over"),a.a.createElement("button",{type:"button",disabled:e,onClick:this.handleStepOut},"Step Out"),a.a.createElement("span",{className:"DisasmButtons__spacer"}),a.a.createElement("button",{type:"button",disabled:e,onClick:this.handleNextHLE},"Next HLE"),a.a.createElement("span",{className:"DisasmButtons__spacer"}),a.a.createElement("button",{type:"button",onClick:this.handleBreakpointOpen,disabled:!this.props.started},"Breakpoint"),a.a.createElement("span",{className:"DisasmButtons__spacer"}),a.a.createElement("span",{className:"DisasmButtons__thread-list"},"Thread: ",this.renderThreadList()),a.a.createElement(B,{ppsspp:this.props.ppsspp,currentThread:this.props.currentThread,isOpen:this.state.breakpointModalOpen,onClose:this.handleBreakpointClose}))}},{key:"renderThreadList",value:function(){var e=this;return 0===this.state.threads.length?"(none)":a.a.createElement("select",{onChange:this.handleThreadSelect,value:this.props.currentThread||this.state.lastThread},this.state.threads.map((function(t){return e.renderThread(t)})))}},{key:"renderThread",value:function(e){var t="DisasmButtons__thread"+(e.isCurrent?" DisasmButtons__thread--current":"");return a.a.createElement("option",{key:e.id,value:e.id,className:t},e.name,e.isCurrent?" (current)":"")}},{key:"componentDidMount",value:function(){var e=this;this.listeners_=ee.listen({"connection.change":function(t){return e.setState({connected:t})},"cpu.stepping":function(){return e.updateThreadList(!0)}})}},{key:"componentWillUnmount",value:function(){ee.forget(this.listeners_)}},{key:"componentDidUpdate",value:function(e,t){!t.connected&&this.state.connected&&this.updateThreadList(void 0===this.props.currentThread)}},{key:"updateThreadList",value:function(e){var t=this;this.state.connected&&this.props.ppsspp.send({event:"hle.thread.list"}).then((function(n){var r=n.threads;if(t.setState({threads:r}),e){var a=r.find((function(e){return e.isCurrent}));a&&a.id!==t.props.currentThread&&t.props.updateCurrentThread(a.id)}}),(function(){t.setState({threads:[]})}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=null;return e.currentThread&&e.currentThread!==t.lastThread&&(n=oe({},n,{lastThread:e.currentThread||""})),(e.stepping||e.started)&&(n=oe({},n,{connected:!0})),!e.started&&t.threads.length&&(n=oe({},n,{threads:[]})),n}}]),t}(r.PureComponent),le=(n(487),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={address:""},n.handleChange=function(e){n.setState({address:e.target.value})},n.handleSubmit=function(e){n.props.started&&n.props.ppsspp.send({event:"cpu.evaluate",thread:n.props.currentThread,expression:n.state.address}).then((function(e){var t=e.uintValue;n.props.started&&n.props.gotoDisasm(t)})),e.preventDefault()},n.handlePC=function(e){n.jumpToReg("pc")},n.handleRA=function(e){n.jumpToReg("ra")},n.ref=a.a.createRef(),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=!this.props.started;return a.a.createElement("form",{action:"#",className:"GotoBox",onSubmit:this.handleSubmit},a.a.createElement("label",{className:"GotoBox__label",htmlFor:"GotoBox__address"},"Go to:"),a.a.createElement("input",{ref:this.ref,type:"text",id:"GotoBox__address",value:this.state.address,onChange:this.handleChange,title:"Hexadecimal address or expression, enter to submit",autoComplete:"off"}),a.a.createElement("button",{type:"button",className:"GotoBox__button",onClick:this.handlePC,disabled:e},"PC"),a.a.createElement("button",{type:"button",className:"GotoBox__button",onClick:this.handleRA,disabled:e},"RA"))}},{key:"componentDidUpdate",value:function(e,t){this.props.promptGotoMarker!==e.promptGotoMarker&&(this.ref.current.focus(),this.ref.current.select())}},{key:"jumpToReg",value:function(e){var t=this;this.props.ppsspp.send({event:"cpu.getReg",name:e}).then((function(e){t.props.started&&t.props.gotoDisasm(e.uintValue)}))}}]),t}(r.PureComponent)),ue=n(39),pe=n(202);n(548),n(549);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={connected:!1,loading:!0,rowHeight:null,functions:[],filter:"",filteredFunctions:[]},n.renderSizedList=function(e){var t=e.height,r=e.width,s=n.state,i=s.filter,o=s.filteredFunctions,c=s.rowHeight;return a.a.createElement(pe.b,{height:t,rowHeight:c,rowRenderer:n.renderFunc,width:r,rowCount:o.length,filter:i})},n.renderFunc=function(e){var t=e.index,r=e.key,s=e.style,i=n.state.filteredFunctions[t];return a.a.createElement("div",{key:r+"-"+i.address,style:s},a.a.createElement("button",{type:"button","data-address":i.address},i.name))},n.handleFilter=function(e){var t=e.target.value,r=n.applyFilter(n.state.functions,t);n.setState({filter:t,filteredFunctions:r})},n.handleClick=function(e){var t=e.target.dataset.address;n.props.gotoDisasm(Number(t)),e.preventDefault()},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.filter;return a.a.createElement("div",{className:"FuncList"},a.a.createElement("input",{type:"search",className:"FuncList__search",value:e,onChange:this.handleFilter}),this.renderList())}},{key:"renderList",value:function(){var e=this.state,t=e.filter,n=e.loading,r=e.rowHeight;return n||!r?a.a.createElement("div",{className:"FuncList__loading"},"Loading..."):a.a.createElement("div",{className:"FuncList__listing",onClick:this.handleClick},a.a.createElement(pe.a,{filter:t},this.renderSizedList))}},{key:"componentDidMount",value:function(){var e=this;this.listeners_=ee.listen({"connection.change":function(t){return e.setState({connected:t})},"game.start":function(){return e.updateList()}}),this.state.connected&&this.updateList(),this.state.rowHeight||setTimeout((function(){return e.measureHeight()}),0)}},{key:"componentWillUnmount",value:function(){ee.forget(this.listeners_)}},{key:"componentDidUpdate",value:function(e,t){var n=this;!t.connected&&this.state.connected&&this.updateList(),this.state.rowHeight||setTimeout((function(){return n.measureHeight()}),0)}},{key:"measureHeight",value:function(){var e=document.querySelector(".FuncList__loading");if(e){var t=e.getBoundingClientRect().height;this.setState({rowHeight:t})}}},{key:"updateList",value:function(){var e=this;this.state.connected&&(this.state.loading||0!==this.state.functions.length||this.setState({loading:!0}),this.props.ppsspp.send({event:"hle.func.list"}).then((function(t){var n=t.functions;n.sort((function(e,t){return e.name.localeCompare(t.name)}));var r=e.applyFilter(n,e.state.filter);e.setState({functions:n,filteredFunctions:r,loading:!1})}),(function(){e.setState({functions:[],filteredFunctions:[],loading:!1})})))}},{key:"applyFilter",value:function(e,t){if(""===t)return e;var n=t.toLowerCase();return e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(n)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=null;return e.started&&(n=he({},n,{connected:!0})),!e.started&&t.functions.length&&(n=he({},n,{functions:[],filteredFunctions:[]})),n}}]),t}(r.PureComponent),me=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={cursor:0},n.needsScroll=!1,n.onDoubleClick=function(e,t){0===e.button&&n.props.onDoubleClick(e,t)},n.cursorRef=a.a.createRef(),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("dl",null,this.props.registerNames.map((function(t,n){return e.renderReg(t,n)})))}},{key:"renderReg",value:function(e,t){var n=this,r=function(e){return{cat:n.props.id,reg:t,value:n.format(t)}},s={onDoubleClick:function(e){return n.onDoubleClick(e,r())},onMouseDown:function(e){return n.setState({cursor:t})},onKeyDown:function(e){return n.onKeyDown(e)},tabIndex:0},i={"RegPanel__item--changed":this.changed(t),"RegPanel__item--selected":this.state.cursor===t},o=this.state.cursor===t?this.cursorRef:void 0;return a.a.createElement(R.b,{id:this.props.contextmenu,renderTag:"a",attributes:s,collect:r,key:t},a.a.createElement("dt",null,e),a.a.createElement("dd",{className:E()(i),ref:o},this.format(t)))}},{key:"format",value:function(e){return 0===this.props.id?D(this.props.uintValues[e]):this.props.floatValues[e]}},{key:"changed",value:function(e){return this.props.uintValues[e]!==this.props.uintValuesLast[e]}},{key:"componentDidUpdate",value:function(e,t){if(this.needsScroll&&this.cursorRef.current){var n=this.cursorRef.current.parentNode;z(n,{block:"nearest"}),n.focus(),this.needsScroll=!1}}},{key:"onKeyDown",value:function(e){K()||("ArrowUp"===e.key&&this.state.cursor>0&&(this.needsScroll=!0,this.setState({cursor:this.state.cursor-1}),e.preventDefault()),"ArrowDown"===e.key&&this.state.cursor<this.props.registerNames.length-1&&(this.needsScroll=!0,this.setState({cursor:this.state.cursor+1}),e.preventDefault()))}}]),t}(r.PureComponent);n(550),n(551),n(442);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ve=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={categories:[]},n.handleViewMemory=function(e,t){console.log(t)},n.handleViewDisassembly=function(e,t){var r=n.state.categories[t.cat].uintValues[t.reg];n.props.gotoDisasm(r)},n.handleCopyReg=function(e,t,n){F(t.value)},n.handleChangeReg=function(e,t,r){var a=(0===t.cat?"0x":"")+t.value,s=n.state.categories[t.cat].registerNames[t.reg],i=window.prompt("New value for "+s,a);if(null!==i){var o={event:"cpu.setReg",thread:n.props.currentThread,category:t.cat,register:t.reg,value:i};n.props.ppsspp.send(o).catch((function(e){window.alert(e)}))}},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"RegPanel"},this.renderTabs(),this.renderContextMenu())}},{key:"renderTabs",value:function(){var e=this,t=this.state.categories;return 0===t.length?"":a.a.createElement(ue.d,null,a.a.createElement(ue.b,null,t.map((function(e){return a.a.createElement(ue.a,{key:e.id},e.name)}))),t.map((function(t){return a.a.createElement(ue.c,{key:t.id},a.a.createElement(me,Object.assign({contextmenu:"reglist",onDoubleClick:e.handleChangeReg},t)))})))}},{key:"renderContextMenu",value:function(){var e=!this.props.stepping;return a.a.createElement(R.a,{id:"reglist"},a.a.createElement(R.c,{onClick:this.handleViewMemory},"Go to in Memory View"),a.a.createElement(R.c,{onClick:this.handleViewDisassembly},"Go to in Disassembly"),a.a.createElement(R.c,{divider:!0}),a.a.createElement(R.c,{onClick:this.handleCopyReg},"Copy Value"),a.a.createElement(R.c,{disabled:e,onClick:this.handleChangeReg},"Change..."))}},{key:"componentDidMount",value:function(){var e=this;this.listeners_=ee.listen({"connection.change":function(t){return t&&e.updateRegs(!1)},"cpu.stepping":function(){return e.updateRegs(!1)},"cpu.setReg":function(t){return e.updateReg(t)}})}},{key:"componentWillUnmount",value:function(){ee.forget(this.listeners_)}},{key:"componentDidUpdate",value:function(e,t){this.props.currentThread&&this.props.currentThread!==e.currentThread&&this.updateRegs(!0)}},{key:"updateRegs",value:function(e){var t=this;this.props.ppsspp.send({event:"cpu.getAllRegs",thread:this.props.currentThread}).then((function(n){var r=n.categories,a=0!==t.state.categories.length,s=!0,i=!1,o=void 0;try{for(var c,l=r[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var u=c.value,p=a?t.state.categories[u.id]:null;u.uintValuesLast=a?e?p.uintValuesLast:p.uintValues:u.uintValues,u.floatValuesLast=a?e?p.floatValuesLast:p.floatValues:u.floatValues}}catch(d){i=!0,o=d}finally{try{s||null==l.return||l.return()}finally{if(i)throw o}}t.setState({categories:r})}),(function(e){console.error(e)}))}},{key:"updateReg",value:function(e){var t=function(e,t,n){return e.slice(0,t).concat([n]).concat(e.slice(t+1))},n=this.state.categories.map((function(n){return n.id===e.category?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{uintValuesLast:n.uintValuesLast,floatValuesLast:n.floatValuesLast,uintValues:t(n.uintValues,e.register,e.uintValue),floatValues:t(n.floatValues,e.register,e.floatValue)}):n}));this.setState({categories:n})}}]),t}(r.PureComponent),be=(n(552),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={categories:[],format:"float"},n.handleFormat=function(e){var t=e.target.value;n.setState({format:t})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.categories,n=e.format;if(t.length<3)return null;for(var r=[],s=0;s<t[2].uintValues.length/16;++s)r.push(this.renderMatrix(s));return a.a.createElement(b,{contentLabel:"VFPU",isOpen:this.props.isOpen,onClose:this.props.onClose},a.a.createElement("h2",null,"VFPU Registers"),a.a.createElement("div",{className:"VisualizeVFPU__list"},r),a.a.createElement("div",{className:"VisualizeVFPU__format"},"Display as:",a.a.createElement("label",null,a.a.createElement("input",{type:"radio",checked:"float"===n,value:"float",onChange:this.handleFormat})," Float"),a.a.createElement("label",null,a.a.createElement("input",{type:"radio",checked:"uint"===n,value:"uint",onChange:this.handleFormat})," Hex")))}},{key:"renderMatrix",value:function(e){return a.a.createElement("table",{className:"VisualizeVFPU__matrix",key:e},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{className:"VisualizeVFPU__name"},"M",e,"00"),a.a.createElement("th",{className:"VisualizeVFPU__row-header"},"R",e,"00"),a.a.createElement("th",{className:"VisualizeVFPU__row-header"},"R",e,"01"),a.a.createElement("th",{className:"VisualizeVFPU__row-header"},"R",e,"02"),a.a.createElement("th",{className:"VisualizeVFPU__row-header"},"R",e,"03"))),a.a.createElement("tbody",null,this.renderColumn(e,0),this.renderColumn(e,1),this.renderColumn(e,2),this.renderColumn(e,3)))}},{key:"renderColumn",value:function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("th",{className:"VisualizeVFPU__col-header"},"C",e,t,"0"),a.a.createElement("td",null,this.renderValue(e,t,0)),a.a.createElement("td",null,this.renderValue(e,t,1)),a.a.createElement("td",null,this.renderValue(e,t,2)),a.a.createElement("td",null,this.renderValue(e,t,3)))}},{key:"renderValue",value:function(e,t,n){var r=4*e+32*t+n,a=this.state.categories[2];return"uint"===this.state.format?D(a.uintValues[r]):a.floatValues[r]}},{key:"componentDidMount",value:function(){var e=this;this.listeners_=ee.listen({"cpu.getAllRegs":function(t){var n=t.categories;return e.setState({categories:n})}})}},{key:"componentWillUnmount",value:function(){ee.forget(this.listeners_)}}]),t}(r.PureComponent)),ye=(n(553),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={vfpuModalOpen:!1,everShownFuncs:!1},n.handleSelect=function(e){1!==e||n.state.everShownFuncs||n.setState({everShownFuncs:!0})},n.handleVFPUOpen=function(){n.setState({vfpuModalOpen:!0})},n.handleVFPUClose=function(){n.setState({vfpuModalOpen:!1})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"LeftPanel"},a.a.createElement(ue.d,{onSelect:this.handleSelect},a.a.createElement(ue.b,null,a.a.createElement(ue.a,null,"Regs"),a.a.createElement(ue.a,null,"Funcs"),a.a.createElement(ue.a,null,"Tools")),a.a.createElement(ue.c,{forceRender:!0},a.a.createElement(ve,this.props)),a.a.createElement(ue.c,{forceRender:this.state.everShownFuncs},a.a.createElement(fe,this.props)),a.a.createElement(ue.c,{className:"react-tabs__tab-panel LeftPanel__tools"},a.a.createElement("button",{type:"button",onClick:this.handleVFPUOpen},"Visualize VFPU"))),a.a.createElement(be,Object.assign({},this.props,{isOpen:this.state.vfpuModalOpen,onClose:this.handleVFPUClose})))}}]),t}(r.PureComponent));n(554);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Oe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={stepping:!1,paused:!0,started:!1,pc:0,setInitialPC:!1,selectionTop:null,selectionBottom:null,jumpMarker:null,promptGotoMarker:null,lastTicks:0,ticks:0,currentThread:void 0},n.updateSelection=function(e){n.setState(e)},n.gotoDisasm=function(e){n.setState({selectionTop:e,selectionBottom:e,jumpMarker:{}})},n.promptGoto=function(){n.setState({promptGotoMarker:{}})},n.updateCurrentThread=function(e,t){n.setState({currentThread:e,pc:t,setInitialPC:0!==t}),t&&n.gotoDisasm(t)},n.updateInitialPC=function(){n.props.ppsspp.send({event:"cpu.getReg",name:"pc"}).then((function(e){var t=e.uintValue;n.state.setInitialPC||n.gotoDisasm(t),n.setState({pc:t,setInitialPC:0!==t})}))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.paused,n={stepping:e.stepping&&!t,paused:t,started:e.started,currentThread:e.currentThread},r=this.state,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{selectionTop:r.selectionTop,selectionBottom:r.selectionBottom,jumpMarker:r.jumpMarker,pc:r.pc,setInitialPC:r.setInitialPC});return a.a.createElement("div",{id:"CPU"},a.a.createElement("div",{className:"CPU__pane"},a.a.createElement(le,Object.assign({ppsspp:this.props.ppsspp},n,{gotoDisasm:this.gotoDisasm,promptGotoMarker:this.state.promptGotoMarker})),a.a.createElement(ye,Object.assign({},this.props,n,{gotoDisasm:this.gotoDisasm}))),a.a.createElement("div",{className:"Disasm__container"},a.a.createElement(ce,Object.assign({},this.props,n,{updateCurrentThread:this.updateCurrentThread})),a.a.createElement(se,Object.assign({},this.props,s,{updateSelection:this.updateSelection,promptGoto:this.promptGoto}))))}},{key:"componentDidMount",value:function(){var e=this;this.listeners_=ee.listen({connection:function(){return e.onConnection()},"connection.change":function(t){return e.onConnectionChange(t)},"cpu.stepping":function(t){return e.onStepping(t)},"cpu.resume":function(){return e.setState({stepping:!1})},"game.start":function(){e.state.setInitialPC||e.updateInitialPC(),e.setState({started:!0,paused:!1})},"game.quit":function(){e.setState({started:!1,stepping:!1,paused:!0,pc:0,setInitialPC:!1,currentThread:void 0})},"game.pause":function(){return e.setState({paused:!0})},"game.resume":function(){return e.setState({paused:!1})},"cpu.setReg":function(t){if(0===t.category&&32===t.register){var n=t.uintValue;e.state.setInitialPC||e.gotoDisasm(n),e.setState({pc:n,setInitialPC:0!==n})}},"cpu.getAllRegs":function(t){var n=t.categories[0].uintValues[32];e.state.setInitialPC||e.gotoDisasm(n),e.setState({pc:n,setInitialPC:0!==n})}})}},{key:"componentWillUnmount",value:function(){ee.forget(this.listeners_)}},{key:"onConnectionChange",value:function(e){this.setState({connected:e,started:!1,stepping:!1,paused:!0}),e||this.setState({currentThread:void 0})}},{key:"onConnection",value:function(){var e=this;this.props.ppsspp.send({event:"cpu.status"}).then((function(t){var n=t.stepping,r=t.paused,a=t.pc,s=t.ticks,i=0!==a||n;e.state.setInitialPC||e.gotoDisasm(a),e.setState({connected:!0,started:i,stepping:n,paused:r,pc:a,setInitialPC:0!==a,ticks:s,lastTicks:s})}),(function(t){e.setState({stepping:!1,paused:!0})}))}},{key:"onStepping",value:function(e){this.setState({stepping:!0,pc:e.pc,selectionTop:e.pc,selectionBottom:e.pc,lastTicks:this.state.ticks,ticks:e.ticks})}}]),t}(r.PureComponent),Se=(n(555),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={connected:!1,started:!1,paused:!0,recording:!1},n.beginRecord=function(e){n.setState({recording:!0}),n.props.ppsspp.send({event:"gpu.record.dump"}).then((function(e){var t=document.createElement("a");t.setAttribute("download","recording.ppdmp"),t.href=e.uri,t.hidden=!0,document.body.appendChild(t),t.click(),document.body.removeChild(t),n.setState({recording:!1})})),e.preventDefault()},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"GPU"},a.a.createElement("div",{className:"GPU__info"},this.state.started&&!this.state.paused?"Click below to generate a GE dump.  It will download as a file.":"Waiting for a game to start..."),this.state.started&&!this.state.paused?a.a.createElement("form",{className:"GPU__form",onSubmit:this.beginRecord},a.a.createElement("button",{disabled:this.state.recording},this.state.recording?"Recording...":"Record")):null)}},{key:"componentDidMount",value:function(){var e=this;this.listeners_=ee.listen({connection:function(){return e.onConnection()},"connection.change":function(t){return e.onConnectionChange(t)},"game.start":function(){return e.setState({started:!0,paused:!1})},"game.quit":function(){return e.setState({started:!1,paused:!0})},"game.pause":function(){return e.setState({paused:!0})},"game.resume":function(){return e.setState({paused:!1})}})}},{key:"componentWillUnmount",value:function(){ee.forget(this.listeners_)}},{key:"onConnectionChange",value:function(e){this.setState({connected:e,started:!1,paused:!0})}},{key:"onConnection",value:function(){var e=this;this.props.ppsspp.send({event:"cpu.status"}).then((function(t){var n=t.stepping,r=t.paused,a=0!==t.pc||n;e.setState({connected:!0,started:a,paused:r})}),(function(t){e.setState({paused:!0})}))}}]),t}(r.PureComponent)),Ce=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return"log"===this.props.item.event?this.formatLogEvent():this.renderInternal()}},{key:"renderInternal",value:function(){return a.a.createElement("span",{className:this.makeClassName()},this.props.item.message)}},{key:"formatLogEvent",value:function(){var e=this.props.item;return a.a.createElement("span",{className:this.makeClassName()},a.a.createElement("span",{className:"Log__message__header"},a.a.createElement("span",{className:"Log__message__timestamp"},e.timestamp)," "+e.header+" "),e.message)}},{key:"makeClassName",value:function(){var e,t=this.props.item;return E()("Log__message",(e={"Log__message--internal":"log"!==t.event},Object(l.a)(e,"Log__message--channel-"+t.channel,"log"===t.event),Object(l.a)(e,"Log__message--level-"+t.level,!0),e))}}]),t}(r.PureComponent);n(556);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={id:0,items:[]},n.divRef=a.a.createRef(),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"Log",ref:this.divRef},this.state.items.map(this.renderItem.bind(this)))}},{key:"renderItem",value:function(e){return a.a.createElement(Ce,{key:e.id,item:e})}},{key:"addLogItem",value:function(e){var t=this.state.id+1,n=we({id:t},e),r=this.state.items.concat([n]).slice(-5e3);this.setState({id:t,items:r})}},{key:"componentDidMount",value:function(){var e=this;this.props.ppsspp.onError=function(t,n){var r={message:t+"\n",level:n};e.addLogItem(r)},this.listeners_=ee.listen({log:this.onLogEvent.bind(this)})}},{key:"componentDidUpdate",value:function(e,t){if(t.id!==this.state.id){var n=this.divRef.current;n.scrollTop=n.scrollHeight-n.clientHeight}}},{key:"componentWillUnmount",value:function(){ee.forget(this.listeners_)}},{key:"onLogEvent",value:function(e){var t=we({},e);this.addLogItem(t)}}]),t}(r.PureComponent);n(557);function Pe(e){return a.a.createElement("div",{id:"NotConnected"},e.connecting?"Connecting to PPSSPP...":"Not connected to PPSSPP",a.a.createElement("div",{className:"NotConnected__info"},'Make sure "Allow remote debugger" is enabled in Developer tools.'),a.a.createElement("form",{className:"NotConnected__form",onSubmit:function(t){var n=t.target.elements["debugger-uri"].value;e.connect(n),t.preventDefault()}},a.a.createElement("input",{type:"text",name:"debugger-uri",placeholder:"ws://ip:port/debugger",className:"NotConnected__uri"}),a.a.createElement("button",{disabled:e.connecting},"Connect Manually")),a.a.createElement("form",{className:"NotConnected__form",onSubmit:function(t){e.connect(null),t.preventDefault()}},a.a.createElement("button",{disabled:e.connecting},"Connect Automatically")))}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _e=["cpu.stepping","cpu.resume"],Te=2,xe=function(){function e(){Object(u.a)(this,e),this.onError=null,this.onClose=null,this.socket_=null,this.pendingTickets_={},this.listeners_={}}return Object(p.a)(e,[{key:"autoConnect",value:function(){var e=this;if(null!==this.socket_)return Promise.reject(new Error("Already connected, disconnect first"));var t=new Error("Couldn't connect");return fetch("//report.ppsspp.org/match/list").then((function(e){return e.json()})).then((function(t){return e.tryNextEndpoint_(t)})).then(this.setupSocket_.bind(this),(function(e){throw t.message=e.message,t.originalError=e,t}))}},{key:"connect",value:function(e){var t=this;if(null!==this.socket_)return Promise.reject(new Error("Already connected, disconnect first"));var n=new Error("Couldn't connect to "+e);return new Promise((function(r,a){var s=new WebSocket(e,"debugger.ppsspp.org");s.onopen=function(){t.socket_=s,r()},s.onclose=function(){a(n)}})).then(this.setupSocket_.bind(this))}},{key:"disconnect",value:function(){if(null===this.socket_)throw new Error("Not connected");this.failAllPending_("Disconnected from PPSSPP"),this.socket_.close(1e3),this.socket_=null}},{key:"listen",value:function(e,t){var n=this;return e in this.listeners_||(this.listeners_[e]=[]),this.listeners_[e].push(t),{remove:function(){var r=n.listeners_[e],a=r.indexOf(t);-1!==a&&r.splice(a,1)}}}},{key:"send",value:function(e){var t=this;if(null===this.socket_)return Promise.reject(new Error("Not connected"));var n=new Error("PPSSPP returned an error");return _e.includes(e.event)?(this.socket_.send(JSON.stringify(e)),Promise.resolve(null)):new Promise((function(r,a){var s=t.makeTicket_();t.pendingTickets_[s]=function(e){"error"===e.event?(n.name="DebuggerError",n.message=e.message,n.originalMessage=e,a(n)):r(e)},t.socket_.send(JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{ticket:s})))}))}},{key:"setupSocket_",value:function(){var e=this;this.socket_.onclose=function(){e.onClose&&e.onClose(),e.failAllPending_("PPSSPP disconnected"),e.socket_=null},this.socket_.onmessage=function(t){try{var n=JSON.parse(t.data);"error"===n.event&&e.handleError_(n.message,n.level);var r=!1;"ticket"in n&&(r=e.handleTicket_(n.ticket,n)),e.handleMessage_(n,r)}catch(a){e.handleError_("Failed to parse message from PPSSPP: "+a.message,Te)}}}},{key:"tryNextEndpoint_",value:function(e){var t=this;return new Promise((function(n,r){if(!e||0===e.length)return r(new Error("Couldn't connect automatically.  Is PPSSPP connected to the same network?"));var a="ws://"+e[0].ip+":"+e[0].p+"/debugger";return t.connect(a).then(n,(function(a){e.length>1?n(t.tryNextEndpoint_(e.slice(1))):r(a)}))}))}},{key:"handleTicket_",value:function(e,t){if(e in this.pendingTickets_){var n=this.pendingTickets_[t.ticket];return delete this.pendingTickets_[t.ticket],n(t),!0}return this.handleError_("Received mismatched ticket: "+JSON.stringify(t),Te),!1}},{key:"handleMessage_",value:function(e,t){t=this.executeHandlers_(e.event,e,t),this.executeHandlers_("*",e,t)}},{key:"executeHandlers_",value:function(e,t,n){if(e in this.listeners_){var r=!0,a=!1,s=void 0;try{for(var i,o=this.listeners_[e][Symbol.iterator]();!(r=(i=o.next()).done);r=!0){(0,i.value)(t,n)&&(n=!0)}}catch(c){a=!0,s=c}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}}return n}},{key:"handleError_",value:function(e,t){this.onError?this.onError(e,t):void 0===t||Number(t)===Te?console.error(e):console.log(e)}},{key:"makeTicket_",value:function(){var e=Math.random().toString(36).substr(2);return e in this.pendingTickets_?this.makeTicket_():e}},{key:"failAllPending_",value:function(e){var t={event:"error",message:e,level:Te};for(var n in this.pendingTickets_)this.pendingTickets_.hasOwnProperty(n)&&this.pendingTickets_[n](t);this.pendingTickets_={}}}]),e}(),Le=n(452),Ne=n.n(Le);n(558);function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Re={name:"ppsspp-debugger",version:"0.1.0"},Me=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={connected:!1,connecting:!1},n.handleAutoConnect=function(){n.connect(null)},n.connect=function(e){n.setState({connecting:!0}),n.ppsspp.onClose=function(){n.log("Debugger disconnected"),ee.change(!1),n.setState({connected:!1,connecting:!1})},(null===e?n.ppsspp.autoConnect():n.ppsspp.connect(e)).then((function(){n.log("Debugger connected"),ee.change(!0),n.setState({connected:!0,connecting:!1})}),(function(e){n.log("Debugger could not connect"),ee.change(!1),n.setState({connected:!1,connecting:!1})}))},n.handleDisconnect=function(){n.ppsspp.disconnect()},n.log=function(e){n.logRef.current?n.logRef.current.addLogItem({message:e+"\n"}):console.error(e)},n.updateTitle=function(e){document&&(e.game?document.title=n.originalTitle+" - "+e.game.id+": "+e.game.title:document.title=n.originalTitle)},n.onConnectionChange=function(e){e?(n.ppsspp.send(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({event:"version"},Re)).catch((function(e){window.alert("PPSSPP seems to think this debugger is out of date.  Try refreshing?\n\nDetails: "+e)})),n.ppsspp.send({event:"game.status"}).then(n.updateTitle,(function(e){return n.updateTitle({})}))):n.updateTitle({})},n.logRef=a.a.createRef(),n.ppsspp=new xe,n.originalTitle=document.title,ee.init(n.ppsspp),ee.listen({"connection.change":n.onConnectionChange,"game.start":n.updateTitle,"game.quit":n.updateTitle}),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(m.a,null,a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("ul",{className:"App-nav"},a.a.createElement(m.b,{to:"/cpu"},"CPU"),a.a.createElement(m.b,{to:"/gpu"},"GPU")),a.a.createElement("img",{src:Ne.a,className:"App-logo",alt:"PPSSPP"}),a.a.createElement("h1",{className:"App-title"},"Debugger")),this.renderContent(),a.a.createElement(je,{ppsspp:this.ppsspp,ref:this.logRef})))}},{key:"renderContent",value:function(){return this.state.connected?a.a.createElement(g.c,null,a.a.createElement(g.a,{path:"/gpu"},a.a.createElement(Se,{ppsspp:this.ppsspp,log:this.log})),a.a.createElement(g.a,null,a.a.createElement(Oe,{ppsspp:this.ppsspp,log:this.log}))):a.a.createElement(Pe,{connecting:this.state.connecting,connect:this.connect})}},{key:"componentDidMount",value:function(){this.props.testing||this.handleAutoConnect()}}]),t}(r.Component),Ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ae(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(444),n(561),n(569);i.a.render(a.a.createElement(Me,null),document.getElementById("root")),c.a.setAppElement("#root"),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");Ve?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ae(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Ae(e)}))}}()}},[[456,1,2]]]);
//# sourceMappingURL=main.265a5b39.chunk.js.map